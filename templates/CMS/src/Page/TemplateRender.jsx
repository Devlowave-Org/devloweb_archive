
import HTMLReactParser from "html-react-parser";
import {renderSite} from "../tools/SiteHTML.js";
import React from "react";

export default function TemplateRender({img, text, members, links}) {

    React.useEffect(() => {
        setTimeout(() => {
            window.addEventListener("scroll",()=>{let e=0;scrollY>=83&&scrollY<=800?document.querySelector(".end-header").querySelectorAll(".section-items").forEach(r=>{setTimeout(()=>{r.classList.add("end-header-animation")},e),e+=200}):scrollY>=1100&&scrollY<=1900?(document.querySelectorAll(".second-section-1-item").forEach(r=>{setTimeout(()=>{r.classList.add("second-section-item-animation")},e),e+=300}),scrollY>=1200&&scrollY<=1700&&document.querySelector(".second-section-1-container").querySelector(".left").querySelector("h3").classList.add("second-section-h3-animation")):scrollY>=1800&&scrollY<=2550?(document.querySelectorAll(".little-image-container").forEach(e=>{e.classList.add("little-image-container-animation")}),document.querySelector(".middle").classList.add("middle-animation"),scrollY>=2e3&&(document.querySelector(".arrow-left").classList.add("arrow-left-animation"),document.querySelector(".arrow-right").classList.add("arrow-right-animation"))):scrollY>=2400&&scrollY<=2700&&(document.querySelector("#instagram-section").querySelector(".img-container").classList.add("instagram-img-container"),document.querySelector("#instagram-section").querySelector(".imgs-container").querySelectorAll(".img-container").forEach(e=>{e.classList.add("instagram-img-container")}))}),window.addEventListener("load",()=>{document.querySelector("#navbar-desktop")?.classList.add("navbar-animation"),document.querySelector("#navbar-mobile")?.classList.add("navbar-animation"),document.querySelector(".header-image").classList.add("header-image-animation"),document.querySelector(".header-text-information").classList.add("header-text-animation")});let burger=document.querySelector("#navbar-mobile").querySelector(".burger-menu"),cross=document.querySelector(".cross");burger.addEventListener("click",()=>{document.querySelector("#navbar-mobile").querySelector(".onglet-container").classList.add("onglet-container-active")}),cross.addEventListener("click",()=>{document.querySelector("#navbar-mobile").querySelector(".onglet-container").classList.remove("onglet-container-active")});let users=members,leftarrow=document.querySelector(".arrow-left"),rightarrow=document.querySelector(".arrow-right");leftarrow.addEventListener("click",()=>{for(let e=0;e<users.length;e++){let r=users[e];4===r.id?r.id=0:r.id++,2!==r.id?changeImages(r,r.id):changeUser(r,r.id)}}),rightarrow.addEventListener("click",()=>{for(let e=0;e<users.length;e++){let r=users[e];0===r.id?r.id=4:r.id--,2!==r.id?changeImages(r,r.id):changeUser(r,r.id)}});let all=[{id:0,element:document.querySelector("#third-section").querySelector(".right").querySelectorAll(".little-image-container")[1].querySelector("img")},{id:1,element:document.querySelector("#third-section").querySelector(".right").querySelectorAll(".little-image-container")[0].querySelector("img")},{id:2,element:document.querySelector("#third-section").querySelector(".middle")},{id:3,element:document.querySelector("#third-section").querySelector(".left").querySelectorAll(".little-image-container")[0].querySelector("img")},{id:4,element:document.querySelector("#third-section").querySelector(".left").querySelectorAll(".little-image-container")[1].querySelector("img")},];function changeImages(e,r){all[r].element.src=e.image}function changeUser(e,r){let t=all[r].element;t.querySelector(".img-container").querySelector("img").src=e.image,t.querySelector("h3").innerText=e.name,t.querySelector("h4").innerText=e.proffession,t.querySelector("p").innerText=e.description,t.querySelector("a").href=`mailto:${e.contact}`}let form=document.querySelector("form"),email=document.querySelector("#email"),message=document.querySelector("#text"),labelEmail=document.querySelector(".label-email"),labelMessage=document.querySelector(".label-text"),button=document.querySelector(".button-form"),userEmail="",isPass=!1;console.log(message),form.addEventListener("submit",e=>{if(e.preventDefault(),isPass){if(""===message.value)return;console.log(message.value),window.location.href=`mailto:${userEmail}?subject=${encodeURIComponent("Message provenant du site.")}&body=${encodeURIComponent(message.value)}`}""!==email.value&&(userEmail=email.value,labelEmail.style.display="none",labelMessage.style.display="block",button.innerText="Envoyer !",isPass=!0,window.innerWidth<=720&&(form.style.flexDirection="column",button.style.width="100%",message.style.minHeight="300px"))});
        }, 100)
    }, [])

    return (
        HTMLReactParser(renderSite({img, text, members, links}))
    )
}

